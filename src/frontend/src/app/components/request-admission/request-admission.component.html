<p>request-admission works!</p>

<div id="colculator" style="
margin: 2%;
width: fit-content;
border: 2px solid royalblue;
">

  <table>
    <tr>
      <td>Start living:</td>
      <td>
        <label>
          <input id="input_start_living" type="date" placeholder="Початок проживання"/>
        </label>
      </td>
    </tr>
    <tr>
      <td>End living:</td>
      <td>
        <label>
          <input id="input_end_living" type="date" placeholder="Початок проживання"/>
        </label>
      </td>
    </tr>
    <tr>
      <td>
        <label for="dropdown_dorms">Choose the dorm:</label>
      </td>
      <td>
        <select name="dropdown_dorms" id="dropdown_dorms">
          <option value="dorm1">#1 (better rooms)</option>
          <option value="dorm2">#2, #3</option>
          <option value="dorm4">#4 (cheaper)</option>
          <option value="dorm5">#5, #6</option>
          <option value="dorm7">#7, #8</option>
        </select>
      </td>
    </tr>

<!--    -->
    <tr>
      <td>
        <input id="radio_4bed" type="radio" name="num_of_beds"/> <label for="radio_4bed">4-bed room</label>
      </td>
      <td>
        <input id="radio_2bed" type="radio" name="num_of_beds"/> <label for="radio_2bed">2-bed room</label>
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <input id="checkbox_orphan" type="checkbox"/> <label for="checkbox_orphan">I'm an orphan</label> <br/>
        <input id="checkbox_ATO" type="checkbox"/> <label for="checkbox_ATO">I or my parent ATOshnik</label> <br/>
        <input id="checkbox_blat" type="checkbox"/> <label for="checkbox_blat">I have a bottle for the dorm commissar</label> <br/>
      </td>
    </tr>
<!--    -->


    <tr>
      <td colspan="2">
        <div style="text-align: center;">
          <input id="button_calculate" type="button" value="Coclulate price" style="font-size: 1.2em;"/>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        Total price:
      </td>
      <td>
        <div style="background-color: lightgrey; padding-left: 1em; border-radius: 2px;">
          <span id="total_price">0</span> UAH
        </div>
      </td>
    </tr>
  </table>
</div>

<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeApB4_XeUbDrXkA33lUlhZb993C-P_0djtR7bksGMpwz8ZJQ/viewform?embedded=true" width="100%" height="847" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>

<!-- Disqus comments -->
<div id="disqus_thread"></div>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<script>
  function getNumberOfDays() {
    let a = document.getElementById("input_start_living");
    let b = document.getElementById("input_end_living");
    let d1 = new Date(a.value);
    let d2 = new Date(b.value);

    return Math.floor((d2 - d1) / (1000*60*60*24));
  }

  function getLivingPrice() {
    /* All in UAH */
    const PRICE_PER_MONTH = 520; //For one bed. Really ranges from 490 to 520
    const PRICE_PER_MONTH_DORM4 = 430;

    const PRICE_PER_DAY_GUEST = 50; //For one bed
    const PRICE_PER_DAY_GUEST_BETTER_ROOM = 90; //For one bed
    const PRICE_PER_DAY_LUX = 805; //For the whole room
    const PRICE_PER_DAY_HALF_LUX = 644; //For the whole room
    const PRICE_PER_DAY_1PLACE = 460; //For the whole room with one bed
    const PRICE_PER_DAY_2PLACES = 575; //For the whole room

    const DEFAULT_PRICE_4BED = 500; //UAH per day
    const DEFAULT_PRICE_2BED = 650; //UAH per day
    const MINIMAL_PRICE = 100; //UAH

    /* Coefficients */
    const PRICE_MODIFIER_ORPHAN = 0.75; // -25%
    const PRICE_MODIFIER_ATO = 0.6; // -40%
    const PRICE_MODIFIER_BLAT = 0.9; // -10%

    var price;
    //Type of room
    if (document.getElementById("radio_4bed").checked) {
      price = DEFAULT_PRICE_4BED;
    }
    else if (document.getElementById("radio_2bed").checked) {
      price = DEFAULT_PRICE_2BED;
    }

    //Types of discount
    if(document.getElementById("checkbox_orphan").checked) {
      price *= PRICE_MODIFIER_ORPHAN;
    }
    if(document.getElementById("checkbox_ATO").checked) {
      price *= PRICE_MODIFIER_ATO;
    }
    if(document.getElementById("checkbox_blat").checked) {
      price *= PRICE_MODIFIER_BLAT;
    }

    return Math.max(price, MINIMAL_PRICE);
  }

</script>
